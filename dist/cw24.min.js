const palette=[{name:"Dark Purple",hex:"#9428FF"},{name:"Light Purple",hex:"#CF91FF"},{name:"Hot Pink",hex:"#FF0EE7"},{name:"Blood Red",hex:"#F12B00"},{name:"Orange",hex:"#FF6A3B"},{name:"Peach",hex:"#FF8888"},{name:"Skin",hex:"#FFBA88"},{name:"Sand",hex:"#DCB588"},{name:"Yellow",hex:"#FFDD62"},{name:"Lime",hex:"#EBFF00"},{name:"Green",hex:"#00D56F"},{name:"Dark Green",hex:"#007813"},{name:"Light Blue",hex:"#55D5FD"},{name:"Medium Blue",hex:"#27B1FE"},{name:"Periwinkle Blue",hex:"#316BFF"},{name:"Dark Blue",hex:"#000AF1"},{name:"Grey",hex:"#554D5C"},{name:"Brown",hex:"#783A00"}],kerningPairs={AT:-.11,TI:.05};let blendModes,sketches=[];const observer=new IntersectionObserver((e,t)=>{e.forEach(e=>{let t=e.target.p5Instance;e.isIntersecting?t.loop():t.noLoop()})},{threshold:.01});function createSketchForElement(e){let t,n=new p5(i=>{let o=3,r,s,a,h,l,c,d,u=palette;function $(e){e.nextElementSibling.querySelector("span").innerHTML=e.value}e.hasAttribute("black")&&(u=[{name:"black",hex:"#000000"}]),i.preload=()=>{d=i.loadFont("/fonts/NHaasGroteskDSPro-55Rg.ttf")},i.setup=()=>{let u=e.getBoundingClientRect(),$,m,f,y,g;(t=i.createCanvas(u.width,u.height)).elt.p5Instance=i,observer.observe(t.elt),sketches.push({sketch:n,canvas:t.elt}),e.insertAdjacentElement("afterend",t.elt),t.position(u.left+window.scrollX,u.top+window.scrollY),l=(r=e.textContent||"").toUpperCase(),a=.95*(s=parseFloat(window.getComputedStyle(e).fontSize)),h=s/30,s<32?(o=2,a=1.1*s):s<50&&(o=1,a=s),i.textSize(s),i.frameRate(10),blendModes=[i.MULTIPLY,i.HARD_LIGHT],i.textAlign(i.LEFT),i.textFont(d),c=[],$=0,m=.7*s,i.textSize(s),f=" ",y=0,g="",l.split("").forEach((e,t)=>{let n=t===l.length-1,o=(kerningPairs[f+e]||0)*s,r=i.textWidth(e)+o;if(g+=e,y+=r," "===e||n){$+y>i.width&&($=0,m+=a);let h=$;for(let d=0;d<g.length;d++){let u=g[d],F=0===d?0:(kerningPairs[g[d-1]+u]||0)*s,_=i.createVector(h+F,m);c.push(new x(u,_,c.length)),h+=i.textWidth(u)+F}$+=y,y=0,g=""}f=e}),c.forEach(e=>{for(let t=0;t<2;t++)e.addParticle()})},i.draw=()=>{i.clear(),i.push();for(let e=0;e<c.length;e++)i.frameCount%2==0&&(c[e].addParticle(),c[e].particles.splice(0,1)),c[e].run();i.pop()};let m=function(e,t,n){var o,r,s,a;this.index=n;let l,c,d,$,m=(o=t.x,r=t.y,s=h,a=h,l=i.random(i.TWO_PI),c=i.random(a,s),d=o+c*i.cos(l),$=r+c*i.sin(l),i.createVector(d,$));this.pos={goal:m,current:m},this.direction=p5.Vector.sub(this.pos.goal,this.pos.current),this.direction.normalize(),this.type="stationary",this.color=i.random(u).hex,this.blendMode=i.random(blendModes),this.letter=e,this.theta=0,this.speed=2,this.countDown=50,this.reachedGoal=!0};function f(e,t,n){return round((e-n)/t)*t+n}m.prototype.run=function(){this.calculateReachedGoal(),this.update(),this.display()},m.prototype.update=function(){if(this.reachedGoal)this.speed=0,i.frameCount%2==0&&(this.pos.current=this.pos.goal.copy(),this.pos.current.x+=i.random(-h,h),this.pos.current.y+=i.random(-h,h));else{let e=p5.Vector.mult(this.direction,this.speed);this.pos.current.add(e)}},m.prototype.display=function(){i.fill(this.color),i.blendMode(this.blendMode),i.push();let e=.1*s*1;i.translate(f(this.pos.current.x,o,0),f(this.pos.current.y+e,o,0)),i.rotate(this.theta),i.text(this.letter,0,0),i.pop()},m.prototype.isDead=function(){return this.countDown<=0},m.prototype.calculateReachedGoal=function(){"inward"==this.type?10>this.pos.current.dist(this.pos.goal)&&(this.reachedGoal=!0,this.type):"outward"==this.type?this.countDown<=0&&(this.reachedGoal=!1):this.type};let x=function(e,t,n){this.letter=e,this.origin=t.copy(),this.particles=[],this.index=n,this.type="Stationary"};function y(e,t){m.call(this,t),this.theta=0,this.letter=e}function f(e,t,n){return Math.ceil((e-n)/t)*t+n}function g(){resizeCanvas(windowWidth,windowHeight)}function F(e,t,n,i,o){return i+(e-t)/(n-t)*(o-i)}x.prototype.addParticle=function(){p=new m(this.letter,this.origin,this.index),this.particles.splice((this.particles.length+1)*Math.random()|0,0,p)},x.prototype.run=function(){for(let e=this.particles.length-1;e>=0;e--){let t=this.particles[e];t.run(),t.isDead()&&this.particles.splice(e,1)}},y.prototype=Object.create(m.prototype),y.prototype.constructor=y,y.prototype.update=function(){m.prototype.update.call(this),this.theta+=this.rotationChange/10},y.prototype.display=function(){m.prototype.display.call(this)}},e)}function reDraw(){sketches.forEach(e=>{e.sketch&&e.sketch.remove()}),sketches=[];let e=Array.from(document.querySelectorAll("*[generative]"));e.forEach(e=>{createSketchForElement(e)})}reDraw();let resizeTimeout;window.addEventListener("resize",function(){clearTimeout(resizeTimeout),resizeTimeout=setTimeout(reDraw,100)});